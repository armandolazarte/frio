<!--DATA TABLE-->
<link href="{url_static}vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
<link href="{url_static}vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet">
<!--DATA TABLE-->
<div class="col-lg-12">
    <ul class="breadcrumb">
        <li><a href="{url_app}/reporte/{panel_general}"><i class="fa fa-home"></i> HOME</a></li>
        <li><a href="{url_app}/{objeto}/{panel_objeto}">Panel Gastos</a></li>
    </ul>
</div>
<div class="col-md-4 col-sm-4 col-xs-4">
    <div class="row top_tiles">
        <div class="animated flipInY col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="tile-stats">
                <div class="icon" style="padding-top: 15px; padding-right: 35px;"><i class="fa fa-money"></i></div>
                <div class="count">${gasto-mensual}</div>
                <h3>Gastos</h3>
                <p>Suma de gastos mensuales</p>
            </div>
        </div>
    </div>
    <div class="x_panel">
        <div class="x_title">
            <h2><i class="fa fa-plus-square"></i>&nbsp;&nbsp; Agregar gasto</h2>
            <ul class="nav navbar-right panel_toolbox">
                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                <li><a class="close-link"><i class="fa fa-close"></i></a></li>
            </ul>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <div class=" form">
                <form class="form" id="formulario_guardar" method="post" action="{url_app}/gasto/guardar">
                    <div class="form-group col-lg-8">
                        <label>Comprobante</label>
                        <input type="text" class="form-control" id="comprobante" name="comprobante" value="0" required>
                    </div>
                    <div class="form-group col-lg-4">
                        <label>Fecha</label>
                        <input type="date" class="form-control" id="fecha" name="fecha" value="{fecha_sys}" required>
                    </div>
                    <div class="form-group col-lg-6">
                        <label>Categoría</label>
                        <select class="form-control m-bot15" name="gastocategoria" id="gastocategoria" required>
                            {slt_gastocategoria}
                        </select>
                    </div>
                    <div class="form-group col-lg-6">
                        <label>Tipo Pago</label>
                        <select class="form-control m-bot15" name="ingresotipopago" id="ingresotipopago" onchange="traerTipoPago();" required>
                            {slt_ingresotipopago}
                        </select>
                    </div>
                    <div class="form-group col-lg-12">
                        <label>Detalle</label>
                        <textarea class="form-control" id="detalle" name="detalle" required></textarea>
                    </div>
                    <div class="form-group col-lg-12" id="div_transferencia_1" style="display: none;">
                        <label>Transferencia</label>
                        <hr style="margin-top: 5px; margin-bottom: 5px;"/>
                    </div>
                    <div class="form-group col-lg-6" id="div_transferencia_2" style="display: none;">
                        <label>N° Transferencia</label>
                        <input type="text" class="form-control" id="numero_transferencia" name="numero_transferencia" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_transferencia_3" style="display: none;">
                        <label>Banco</label>
                        <input type="text" class="form-control" id="banco_transferencia" name="banco_transferencia" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_transferencia_4" style="display: none;">
                        <label>Plaza</label>
                        <input type="text" class="form-control" id="plaza_transferencia" name="plaza_transferencia" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_transferencia_5" style="display: none;">
                        <label>N° Cuenta</label>
                        <input type="text" class="form-control" id="cuenta_transferencia" name="cuenta_transferencia" required>
                    </div>
                    <div class="form-group col-lg-12" id="div_cheque_1" style="display: none;">
                        <label>Cheque</label>
                        <hr style="margin-top: 5px; margin-bottom: 5px;"/>
                    </div>
                    <div class="form-group col-lg-6" id="div_cheque_2" style="display: none;">
                        <label>N° Cheque</label>
                        <input type="text" class="form-control" id="numero_cheque" name="numero_cheque" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_cheque_3" style="display: none;">
                        <label>Titular</label>
                        <input type="text" class="form-control" id="titular_cheque" name="titular_cheque" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_cheque_4" style="display: none;">
                        <label>Fecha Vencimiento</label>
                        <input type="date" class="form-control" id="fecha_vencimiento_cheque" name="fecha_vencimiento_cheque" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_cheque_5" style="display: none;">
                        <label>Fecha Pago</label>
                        <input type="date" class="form-control" id="fecha_pago_cheque" name="fecha_pago_cheque" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_cheque_6" style="display: none;">
                        <label>Documento</label>
                        <input type="text" class="form-control" id="documento_cheque" name="documento_cheque" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_cheque_6" style="display: none;">
                        <label>Banco</label>
                        <input type="text" class="form-control" id="banco_cheque" name="banco_cheque" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_cheque_7" style="display: none;">
                        <label>Plaza</label>
                        <input type="text" class="form-control" id="plaza_cheque" name="plaza_cheque" required>
                    </div>
                    <div class="form-group col-lg-6" id="div_cheque_8" style="display: none;">
                        <label>N° Cuenta</label>
                        <input type="text" class="form-control" id="cuenta_cheque" name="cuenta_cheque" required>
                    </div>
                    <div class="form-group col-lg-4">
                        <label>Importe</label>
                        <input type="text" class="form-control" id="importe" name="importe" required>
                    </div>
                    <div class="form-group col-lg-4">
                        <label>IVA</label>
                        <input type="text" class="form-control" id="iva" name="iva" required>
                    </div>
                    <div class="form-group col-lg-4">
                        <label>Total</label>
                        <input type="text" class="form-control" id="total" name="total" required>
                    </div>
                    <div class="col-lg-12" style="margin-top: 2%;" align="right">
                        <a href="#" class="btn btn-app" onclick="confirma_formulario(1, '')"> <i class="fa fa-save"></i> Agregar </a>
                    </div>
                </form>
            </div>            
        </div>
    </div>
    <div class="x_panel">
        <div class="x_title">
            <h2><i class="fa fa-search"></i>&nbsp;&nbsp; Buscar gastos</h2>
            <ul class="nav navbar-right panel_toolbox">
                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                <li><a class="close-link"><i class="fa fa-close"></i></a></li>
            </ul>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <div class=" form">
                <form class="form" id="formulario_guardar" method="post" action="{url_app}/gasto/buscar">
                    <div class="form-group col-lg-6">
                        <label>Desde</label>
                        <input type="date" class="form-control" id="desde" name="desde" required>
                    </div><div class="form-group col-lg-6">
                        <label>Hasta</label>
                        <input type="date" class="form-control" id="hasta" name="hasta" required>
                    </div>
                    <div class="col-lg-12" style="margin-top: 2%;" align="right">
                        <button class="btn btn-xs btn-primary" type="submit" style="width: 100%"> <i class="fa fa-search"></i> Buscar</button>
                    </div>
                </form>
            </div>            
        </div>
    </div>
</div>
<div class="col-md-8 col-sm-8 col-xs-8">
    <div class="x_panel">
        <div class="x_title">
            <h2><i class="fa fa-table"></i>&nbsp;&nbsp; Listado de gastos del período actual</h2>
            <ul class="nav navbar-right panel_toolbox">
                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                <li><a class="close-link"><i class="fa fa-close"></i></a></li>
            </ul>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <table id="tbl_gasto" class="table table-striped table-bordered">
                <thead>
                    <tr style="font-size: 12px;">
                        <th>Fecha</th>
                        <th>Comprobante</th>
                        <th>Categoría</th>
                        <th>Detalle</th>
                        <th>Importe</th>
                        <th>IVA</th>
                        <th>Total</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {tbl_gasto}
                </tbody>
            </table>
        </div>
    </div>
</div>
<!-- Datatables -->
<script src="{url_static}vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="{url_static}vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="{url_static}vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="{url_static}vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
<script src="{url_static}vendors/datatables.net-plug-in-date/moment.min.js"></script>
<script src="{url_static}vendors/datatables.net-plug-in-date/datetime.js"></script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        $('#tbl_gasto').dataTable( {
            "aaSorting": [[ 0, "asc" ]]
            , "iDisplayLength":10
            , columnDefs: [ {
                targets: 0,
                render: $.fn.dataTable.render.moment( 'YYYY-MM-DD', 'DD/MM/YYYY' )
            } ]
        } );
    } );

    function traerTipoPago() {
        var ingresotipopago = document.getElementById("ingresotipopago");
        var ingresotipopago_id = ingresotipopago.options[ingresotipopago.selectedIndex].value;
        
        switch(parseInt(ingresotipopago_id)) {
            case 1:
                document.getElementById("div_cheque_1").style.display = "block";
                document.getElementById("div_cheque_2").style.display = "block";
                document.getElementById("div_cheque_3").style.display = "block";
                document.getElementById("div_cheque_4").style.display = "block";
                document.getElementById("div_cheque_5").style.display = "block";
                document.getElementById("div_cheque_6").style.display = "block";
                document.getElementById("div_cheque_7").style.display = "block";
                document.getElementById("div_cheque_8").style.display = "block";
                document.getElementById("div_transferencia_1").style.display = "none";
                document.getElementById("div_transferencia_2").style.display = "none";
                document.getElementById("div_transferencia_3").style.display = "none";
                document.getElementById("div_transferencia_4").style.display = "none";
                document.getElementById("div_transferencia_5").style.display = "none";
                break;
            case 2:
                document.getElementById("div_cheque_1").style.display = "none";
                document.getElementById("div_cheque_2").style.display = "none";
                document.getElementById("div_cheque_3").style.display = "none";
                document.getElementById("div_cheque_4").style.display = "none";
                document.getElementById("div_cheque_5").style.display = "none";
                document.getElementById("div_cheque_6").style.display = "none";
                document.getElementById("div_cheque_7").style.display = "none";
                document.getElementById("div_cheque_8").style.display = "none";
                document.getElementById("div_transferencia_1").style.display = "inline-block";
                document.getElementById("div_transferencia_2").style.display = "inline-block";
                document.getElementById("div_transferencia_3").style.display = "inline-block";
                document.getElementById("div_transferencia_4").style.display = "inline-block";
                document.getElementById("div_transferencia_5").style.display = "inline-block";
                break;
            case 3:
                document.getElementById("div_cheque_1").style.display = "none";
                document.getElementById("div_cheque_2").style.display = "none";
                document.getElementById("div_cheque_3").style.display = "none";
                document.getElementById("div_cheque_4").style.display = "none";
                document.getElementById("div_cheque_5").style.display = "none";
                document.getElementById("div_cheque_6").style.display = "none";
                document.getElementById("div_cheque_7").style.display = "none";
                document.getElementById("div_cheque_8").style.display = "none";
                document.getElementById("div_transferencia_1").style.display = "none";
                document.getElementById("div_transferencia_2").style.display = "none";
                document.getElementById("div_transferencia_3").style.display = "none";
                document.getElementById("div_transferencia_4").style.display = "none";
                document.getElementById("div_transferencia_5").style.display = "none";
                break;
        }
    }
</script>